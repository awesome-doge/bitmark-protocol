<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="391px" preserveAspectRatio="none" style="width:700px;height:391px;" version="1.1" viewBox="0 0 700 391" width="700px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="352" x="176" y="16.708">https://github.com/bitmark-inc/bitmarkd</text><!--MD5=[14d234a86bbecd8e03c4419937e916f8]
cluster block--><polygon fill="#FFFFFF" points="14,144.9531,62,144.9531,69,167.25,678,167.25,678,291.9531,14,291.9531,14,144.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="14" x2="69" y1="167.25" y2="167.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="18" y="159.9482">block</text><!--MD5=[f9f5e47277aa1cf362235c24d633d021]
cluster sync--><polygon fill="#FFFFFF" points="389,36.9531,432,36.9531,439,59.25,493,59.25,493,119.9531,389,119.9531,389,36.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="389" x2="439" y1="59.25" y2="59.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="37" x="393" y="51.9482">sync</text><!--MD5=[857233cdc7018b1e8695fe78ce49561f]
cluster __builtin__--><polygon fill="#FFFFFF" points="580,36.9531,634,36.9531,641,59.25,656,59.25,656,119.9531,580,119.9531,580,36.9531" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="580" x2="641" y1="59.25" y2="59.25"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="48" x="584" y="51.9482">builtin</text><!--MD5=[9711311084467401a8a02c5cfefc375d]
class block.rescanType--><rect fill="#FEFECE" height="48" id="block.rescanType" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="566" y="203.9531"/><ellipse cx="581" cy="219.9531" fill="#FF7700" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M581.8438,226.7031 L579.3906,226.7031 L579.3906,216.4531 L576.25,216.4531 L576.25,214.3125 L584.9844,214.3125 L584.9844,216.4531 L581.8438,216.4531 L581.8438,226.7031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="72" x="595" y="224.1074">rescanType</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="567" x2="669" y1="235.9531" y2="235.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="567" x2="669" y1="243.9531" y2="243.9531"/><!--MD5=[75ad6558e50b1c98567ad53c9e42a712]
class block.blockData--><rect fill="#FEFECE" height="112.0234" id="block.blockData" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="179" x="351.5" y="171.9531"/><ellipse cx="405.25" cy="187.9531" fill="#7FFFD4" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M404.7344,188.5156 Q402.875,187.8125 402.2188,187.0469 Q401.5781,186.2656 401.5781,184.9531 Q401.5781,183.2656 402.6563,182.2969 Q403.7344,181.3281 405.6094,181.3281 Q406.4688,181.3281 407.3125,181.5313 Q408.1719,181.7188 409.0156,182.1094 L409.0156,184.5 Q408.2344,183.9375 407.4063,183.6563 Q406.5938,183.3594 405.7969,183.3594 Q404.9219,183.3594 404.4375,183.7188 Q403.9688,184.0781 403.9688,184.7344 Q403.9688,185.25 404.3125,185.5938 Q404.6563,185.9219 405.75,186.3281 L406.8125,186.7344 Q408.2969,187.2813 409,188.1875 Q409.7188,189.0938 409.7188,190.4688 Q409.7188,192.3438 408.6094,193.2656 Q407.5,194.1875 405.25,194.1875 Q404.3281,194.1875 403.4063,193.9688 Q402.4844,193.75 401.625,193.3281 L401.625,190.7969 Q402.5938,191.4844 403.5156,191.8281 Q404.4375,192.1719 405.3281,192.1719 Q406.2344,192.1719 406.7344,191.7656 Q407.2344,191.3438 407.2344,190.6094 Q407.2344,190.0469 406.8906,189.6406 Q406.5625,189.2188 405.9375,188.9688 L404.7344,188.5156 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="63" x="425.75" y="192.1074">blockData</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="352.5" x2="529.5" y1="203.9531" y2="203.9531"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="359.5" y="211.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="73" x="371.5" y="218.1636">log *logger.L</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="359.5" y="224.7578"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="67" x="371.5" y="230.9683">rebuild bool</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="359.5" y="237.5625"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="79" x="371.5" y="243.7729">blk blockstore</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="359.5" y="250.3672"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="153" x="371.5" y="256.5776">background *background.T</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="359.5" y="263.1719"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="82" x="371.5" y="269.3823">initialised bool</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="352.5" x2="529.5" y1="275.9766" y2="275.9766"/><!--MD5=[415ae01dc7005439652bb4bbac82772f]
class block.blockstore--><rect fill="#FEFECE" height="112.0234" id="block.blockstore" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="294" x="22" y="171.9531"/><ellipse cx="131.75" cy="187.9531" fill="#7FFFD4" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M131.2344,188.5156 Q129.375,187.8125 128.7188,187.0469 Q128.0781,186.2656 128.0781,184.9531 Q128.0781,183.2656 129.1563,182.2969 Q130.2344,181.3281 132.1094,181.3281 Q132.9688,181.3281 133.8125,181.5313 Q134.6719,181.7188 135.5156,182.1094 L135.5156,184.5 Q134.7344,183.9375 133.9063,183.6563 Q133.0938,183.3594 132.2969,183.3594 Q131.4219,183.3594 130.9375,183.7188 Q130.4688,184.0781 130.4688,184.7344 Q130.4688,185.25 130.8125,185.5938 Q131.1563,185.9219 132.25,186.3281 L133.3125,186.7344 Q134.7969,187.2813 135.5,188.1875 Q136.2188,189.0938 136.2188,190.4688 Q136.2188,192.3438 135.1094,193.2656 Q134,194.1875 131.75,194.1875 Q130.8281,194.1875 129.9063,193.9688 Q128.9844,193.75 128.125,193.3281 L128.125,190.7969 Q129.0938,191.4844 130.0156,191.8281 Q130.9375,192.1719 131.8281,192.1719 Q132.7344,192.1719 133.2344,191.7656 Q133.7344,191.3438 133.7344,190.6094 Q133.7344,190.0469 133.3906,189.6406 Q133.0625,189.2188 132.4375,188.9688 L131.2344,188.5156 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="66" x="152.25" y="192.1074">blockstore</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="23" x2="315" y1="203.9531" y2="203.9531"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="30" y="211.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="73" x="42" y="218.1636">log *logger.L</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="23" x2="315" y1="224.7578" y2="224.7578"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="30" y="232.7578"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="88" x="42" y="238.9683">initialise() error</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="30" y="245.5625"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="218" x="42" y="251.7729">process(item *messagebus.Message)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="46" y="264.5776"/><ellipse cx="33" cy="274.1719" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="51" x="42" y="277.3823">Run(args</text><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="50" x="97" y="277.3823">interface</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="77" x="147" y="277.3823">{}, shutdown</text><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="27" x="228" y="277.3823">chan</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="259" y="277.3823"/><text fill="#0000FF" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="33" x="259" y="277.3823">struct</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="292" y="277.3823">{})</text><!--MD5=[34382681a0b56c09507f378284b1a66b]
class sync.RWMutex--><rect fill="#FEFECE" height="48" id="sync.RWMutex" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="397" y="63.9531"/><ellipse cx="412" cy="79.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M414.9688,85.5938 Q414.3906,85.8906 413.75,86.0313 Q413.1094,86.1875 412.4063,86.1875 Q409.9063,86.1875 408.5781,84.5469 Q407.2656,82.8906 407.2656,79.7656 Q407.2656,76.6406 408.5781,74.9844 Q409.9063,73.3281 412.4063,73.3281 Q413.1094,73.3281 413.75,73.4844 Q414.4063,73.6406 414.9688,73.9375 L414.9688,76.6563 Q414.3438,76.0781 413.75,75.8125 Q413.1563,75.5313 412.5313,75.5313 Q411.1875,75.5313 410.5,76.6094 Q409.8125,77.6719 409.8125,79.7656 Q409.8125,81.8594 410.5,82.9375 Q411.1875,84 412.5313,84 Q413.1563,84 413.75,83.7344 Q414.3438,83.4531 414.9688,82.875 L414.9688,85.5938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="56" x="426" y="84.1074">RWMutex</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="398" x2="484" y1="95.9531" y2="95.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="398" x2="484" y1="103.9531" y2="103.9531"/><!--MD5=[25a4c6ed041baf12de685e57d4de6104]
class __builtin__.bool--><rect fill="#FEFECE" height="48" id="__builtin__.bool" rx="5" ry="5" style="stroke: #A80036; stroke-width: 1.5;" width="59" x="588.5" y="63.9531"/><ellipse cx="603.5" cy="79.9531" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M606.4688,85.5938 Q605.8906,85.8906 605.25,86.0313 Q604.6094,86.1875 603.9063,86.1875 Q601.4063,86.1875 600.0781,84.5469 Q598.7656,82.8906 598.7656,79.7656 Q598.7656,76.6406 600.0781,74.9844 Q601.4063,73.3281 603.9063,73.3281 Q604.6094,73.3281 605.25,73.4844 Q605.9063,73.6406 606.4688,73.9375 L606.4688,76.6563 Q605.8438,76.0781 605.25,75.8125 Q604.6563,75.5313 604.0313,75.5313 Q602.6875,75.5313 602,76.6094 Q601.3125,77.6719 601.3125,79.7656 Q601.3125,81.8594 602,82.9375 Q602.6875,84 604.0313,84 Q604.6563,84 605.25,83.7344 Q605.8438,83.4531 606.4688,82.875 L606.4688,85.5938 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="27" x="617.5" y="84.1074">bool</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="589.5" x2="646.5" y1="95.9531" y2="95.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="589.5" x2="646.5" y1="103.9531" y2="103.9531"/><!--MD5=[a438ebe8db1a11d6da39745a3eea754d]
reverse link sync.RWMutex to block.blockData--><path d="M441,125.3444 C441,139.5595 441,156.085 441,171.6669 " fill="none" id="sync.RWMutex&lt;-block.blockData" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="441,112.02,437,118.02,441,124.02,445,118.02,441,112.02" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="386.8922" y="160.9665">extends</text><!--MD5=[2f02bcabf6c6f5545af7d09e8b45c412]
reverse link __builtin__.bool to block.rescanType--><path d="M618,117.3147 C618,142.9595 618,179.7366 618,203.7318 " fill="none" id="__builtin__.bool&lt;-block.rescanType" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><rect fill="#FFFFFF" height="10" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="613" y="107.02"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="567.5156" y="193.0828">alias of</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="158" x="273" y="319.2354">Generated via www.dumels.com</text><image height="60" width="60" x="322" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAACW0lEQVR4Xu2aO1LDMBRFH3/YAR0LoYWKkm9BwV5YDXRQBKhImIFhExlaCgpq/rpRHuM8W4lsyUIWujMHHDt++DiyLJkQ5eTk5OQ4Z04x3xLRBbLXipeWiC4Q7iu+FV8eQT0QXVj4TbGiWPXAGul6UQu/i/UuWaAsHDaQqoK39SkRYchckJaRnI23Jyd8SbrXvFUMCpyOtycp/FF4nXyTLgpX5V8LY1kODZvQCWFc50PFkyd4tBU0dYTxHhsgARm53kTQ2Agj3AxnsUi61vl4WW6vImhshW2DeqjF9/DokoUd00j4uCV2qBxbYex7YsknTQrP2vd3YiwnzC6g3gOVz7qNMPfSdY4JnRb2433ldj6m0W0JP3AAB57YI13vntyE8cmhlqxfxSZ2HGerYvsh6Xq/whiF4FbgKxgluQr7Hlpm4baEJZgPJymMuvgj3GlgmV/jtymdF64iyU+4T+XmXMSUzgoPaLqYKckJrys25MpCggjzwGPfAzzwqBLG6x7pE2wKC6PGLpUHEU2ZEAZyKOYC6pmEr8iul27jmEbCRy2xTeXYCCPYV9YzgZbwSOVJgomgsRW2DfodCNeaHoaMb2HUQ+eWhWOJrTAeyC1ZsEy6SUf9EG+WMPfScjhqgntziNsQNHWEITGk8gP1pvCtKWjqCOPaxLL8t0kT+Pl19MK+gmuXm3/Q/FthXE93pJ+KVPFKCQn3SE8epoETkoQwB+LTwKeflPC0QBjNOgs7pDPCGDrKrxE2AV89/JP7sE1YGAcnJ/EuoF60wjeK55aIMpCWw0Nf5OTk5HQnP5VHM9pzOexnAAAAAElFTkSuQmCC" y="321.5938"/><!--MD5=[bf29ec2c2d1339e60e0b2a888c0a8d2a]
@startuml
skinparamlocked shadowing false
skinparamlocked roundCorner 10
title https://github.com/bitmark-inc/bitmarkd
namespace block {
    class block.rescanType << (T, #FF7700) >>  {
    }
    class blockData << (S,Aquamarine) >> {
        - log *logger.L
        - rebuild bool
        - blk blockstore
        - background *background.T
        - initialised bool

    }
    class blockstore << (S,Aquamarine) >> {
        - log *logger.L

        - initialise() error
        - process(item *messagebus.Message) 

        + Run(args <font color=blue>interface</font>{}, shutdown <font color=blue>chan</font> <font color=blue>struct</font>{}) 

    }
}
"sync.RWMutex" *- - "extends""block.blockData"



"__builtin__.bool" #.. "alias of""block.rescanType"

footer  Generated via www.dumels.com\n<img:support_files/svg_placeholders/logo.png{scale=.3}>
@enduml

PlantUML version 1.2019.12(Sun Nov 03 10:24:54 UTC 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.8+10-post-Debian-1deb10u1
Operating System: Linux
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>